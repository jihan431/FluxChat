:root {
  --bg-color: #0f172a;
  --sidebar-bg: #1e293b;
  --chat-bg: #0f172a;
  --primary: #6366f1;
  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
  --border: #334155;
  --incoming-bubble: #1e293b;
  --outgoing-bubble: #4f46e5;
}

body { margin: 0; font-family: 'Outfit', sans-serif; background: var(--bg-color); color: var(--text-primary); overflow: hidden; }

.app-layout {
  display: grid;
  grid-template-columns: 320px 1fr;
  height: 100vh;
}

/* SIDEBAR */
.sidebar {
  background: var(--sidebar-bg);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
}

.sidebar-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
.my-profile { display: flex; gap: 10px; align-items: center; }
.my-info h3 { margin: 0; font-size: 1rem; }
.status-text { font-size: 0.8rem; color: #22c55e; }

.search-bar { padding: 15px; position: relative; }
.search-bar input { width: 100%; background: var(--bg-color); border: none; padding: 10px 10px 10px 35px; border-radius: 8px; color: white; }
.search-bar i { position: absolute; left: 25px; top: 20px; width: 16px; color: var(--text-secondary); }

.users-list { flex: 1; overflow-y: auto; }
.user-item { padding: 15px; display: flex; align-items: center; gap: 12px; cursor: pointer; transition: 0.2s; }
.user-item:hover, .user-item.active { background: rgba(255,255,255,0.05); }
.avatar { width: 40px; height: 40px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
.user-status { width: 10px; height: 10px; border-radius: 50%; background: var(--text-secondary); }
.user-status.online { background: #22c55e; }

/* CHAT AREA */
.chat-area { position: relative; display: flex; flex-direction: column; background: var(--chat-bg); background-image: radial-gradient(var(--border) 1px, transparent 1px); background-size: 20px 20px; }

.chat-header { padding: 15px 20px; background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 15px; z-index: 5; }
.chat-info { flex: 1; display: flex; align-items: center; gap: 10px; }
.chat-info h3 { margin: 0; }

.messages-container { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }

.message { max-width: 70%; padding: 10px 15px; border-radius: 12px; font-size: 0.95rem; position: relative; word-wrap: break-word; }
.message.incoming { background: var(--incoming-bubble); align-self: flex-start; border-bottom-left-radius: 2px; }
.message.outgoing { background: var(--outgoing-bubble); align-self: flex-end; border-bottom-right-radius: 2px; }
.msg-time { font-size: 0.7rem; opacity: 0.7; display: block; text-align: right; margin-top: 5px; }
.msg-img { max-width: 100%; border-radius: 8px; margin-top: 5px; cursor: pointer; }

.input-area { padding: 15px; background: var(--sidebar-bg); display: flex; align-items: center; gap: 10px; }
#messageInput { flex: 1; padding: 12px; border-radius: 20px; border: none; background: var(--bg-color); color: white; outline: none; }
.icon-btn { background: none; border: none; color: var(--text-secondary); cursor: pointer; padding: 8px; border-radius: 50%; transition: 0.2s; }
.icon-btn:hover { background: rgba(255,255,255,0.1); color: white; }
.send-btn { background: var(--primary); color: white; border: none; padding: 10px; border-radius: 50%; cursor: pointer; display: flex; justify-content: center; align-items: center; }

/* MODAL & CALL */
.modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 100; }
.glass-panel { background: rgba(30, 41, 59, 0.6); backdrop-filter: blur(20px); padding: 40px; border-radius: 24px; text-align: center; border: 1px solid var(--border); width: 90%; max-width: 400px; display: flex; flex-direction: column; align-items: center; }
.avatar.pulse { animation: pulse 2s infinite; box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.7); }
@keyframes pulse { 0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.7); } 70% { transform: scale(1); box-shadow: 0 0 0 20px rgba(99, 102, 241, 0); } 100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); } }

.call-actions { display: flex; gap: 20px; margin-top: 30px; }
.btn-call { width: 50px; height: 50px; border-radius: 50%; border: none; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
.btn-call:hover { transform: scale(1.1); }
.reject { background: #ef4444; }
.accept { background: #22c55e; }
.secondary { background: var(--border); }

.video-container { margin-top: 20px; width: 100%; position: relative; height: 300px; background: black; border-radius: 12px; overflow: hidden; }
#remoteVideo { width: 100%; height: 100%; object-fit: cover; }
#localVideo { position: absolute; bottom: 10px; right: 10px; width: 80px; height: 100px; background: #333; border: 1px solid white; border-radius: 8px; object-fit: cover; }

/* UTILS */
.hidden { display: none !important; }
.back-btn { display: none; background: none; border: none; color: white; cursor: pointer; }

/* RESPONSIVE */
@media (max-width: 768px) {
  .app-layout { grid-template-columns: 1fr; }
  .sidebar { width: 100%; display: flex; }
  .sidebar.hidden { display: none; }
  .chat-area { display: none; width: 100%; height: 100vh; }
  .chat-area.active { display: flex; }
  .back-btn { display: block; }
}